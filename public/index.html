<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Shateros 2.0</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- HEADER ESTILO BUZZEN -->
  <header class="main-header">
    <div class="header-logo">
      <a href="#" id="navHome" class="logo-link">
        <span class="logo-main">Shateros</span>
        <span class="logo-sub">2.0</span>
      </a>
    </div>

    <nav class="header-nav">
      <a href="#" id="navRooms">Explorar salas</a>
      <a href="#" id="navCreate">Crear sala</a>
      <a href="#" id="navMembers">Miembros</a>
      <a href="#" id="navHelp">Ayuda</a>
      <a href="#" id="navAdmin" style="display:none;">Admin</a>
    </nav>

    <div class="header-auth">
      <button type="button" class="btn-header" id="btnHeaderLogin">Inicio de sesi√≥n</button>
      <button type="button" class="btn-header btn-header-primary" id="btnHeaderRegister">Registro</button>
      <button type="button" class="btn-header btn-header-danger" id="btnHeaderLogout" style="display:none;">Cerrar sesi√≥n</button>
    </div>
  </header>

  <main class="main-wrapper">

    <!-- INICIO -->
    <section id="homeView" class="view active">
      <div class="layout-two-cols">
        <aside class="sidebar">
          <h3>Cuenta</h3>
          <div class="auth-box">

            <!-- INFO LOGUEADO -->
            <div id="loggedInfo" style="display:none;">
              <div class="logged-info-row">
                <div class="logged-avatar-wrapper">
                  <img id="loggedAvatarSmall" src="https://ui-avatars.com/api/?name=User" alt="Avatar">
                  <button id="avatarChangeBtn" class="avatar-plus-btn" title="Cambiar avatar">+</button>
                </div>
                <div class="logged-text-block">
                  <p>Conectado como: <strong id="loggedName"></strong></p>
                  <p id="loggedRoleText"></p>
                </div>
              </div>
            </div>

            <!-- INFO INVITADO -->
            <div id="guestInfo">
              <p>No has iniciado sesi√≥n.</p>
              <button class="btn-small" id="sidebarLoginBtn">Iniciar sesi√≥n</button>
              <button class="btn-small" id="sidebarRegisterBtn">Registrarte</button>
            </div>

            <!-- CAJA AVATAR (solo al editar) -->
            <div id="avatarBox" class="avatar-box" style="display:none;">
              <div class="avatar-row">
                <div class="avatar-preview">
                  <img id="avatarImage" src="https://ui-avatars.com/api/?name=User" alt="Avatar">
                </div>
                <div class="avatar-text">
                  <p class="avatar-label">Tu avatar</p>
                  <p class="avatar-hint">Vista previa del avatar que se mostrar√° en las salas.</p>
                </div>
              </div>

              <input type="file" id="avatarFile" accept="image/*" style="display:none;">
              <button type="button" id="saveAvatarBtn" class="btn-small">Elegir imagen‚Ä¶</button>
              <p style="font-size:11px;color:#6b7280;margin-top:4px;">
                El avatar se guarda en este navegador y se comparte con la sala mientras est√©s conectado.
              </p>
            </div>

            <p id="authStatus" class="login-status"></p>
          </div>

          <h3>Men√∫</h3>
          <ul>
            <li><a href="#" id="homeJoinRooms">Unirte a una sala</a></li>
            <li><a href="#" id="homeCreateRoom">Crear tu canal</a></li>
            <li><a href="#" id="navProfile">Mi perfil</a></li>
          </ul>

          <h3>Categor√≠as</h3>
          <ul>
            <li>Charlas de la ciudad</li>
            <li>Inform√°tica</li>
            <li>Diversi√≥n y juegos</li>
            <li>General</li>
            <li>Intereses</li>
            <li>Deporte y salud</li>
            <li>Estilos de vida</li>
            <li>Compa√±eros</li>
            <li>Romance</li>
          </ul>
        </aside>

        <section class="home-content">
          <!-- Hero principal -->
          <div class="home-hero">
            <div class="hero-text">
              <h1>¬øSalas de chat gratuitas? √öNETE A SHATEROS 2.0</h1>
              <ul class="hero-list">
                <li>Shateros Chat es 100% GRATIS.</li>
                <li>Ambiente retro, an√≥nimo y con buen rollo.</li>
                <li>Charla con personas afines, sin importar tu inter√©s.</li>
                <li>Salas para amistades, ligue, juegos y m√°s.</li>
              </ul>
              <button id="btnGoToRooms" class="btn-primary hero-cta">Ver salas disponibles</button>
              <p class="hero-subtext">
                Shateros 2.0 cuenta con salas oficiales y salas creadas por la comunidad.
              </p>
            </div>
            <div class="hero-banner">
              <span class="hero-title">LIVE CHAT</span>
              <span class="hero-sub">Conectado 24/7</span>
            </div>
          </div>

          <!-- Cajas tipo Buzzen -->
          <div class="home-panels">
            <article class="buzz-box">
              <div class="buzz-box-header">Aviso</div>
              <div class="buzz-box-body">
                Versi√≥n de prueba en red local. M√°s adelante podr√°s subirla a un servidor real,
                activar SSL y conectar bots de trivia.
              </div>
            </article>

            <article class="buzz-box">
              <div class="buzz-box-header">Comunidad</div>
              <div class="buzz-box-body">
                Salas p√∫blicas, salas de amigos, salas de juegos y m√°s. Pensado para crecer poco a poco,
                igual que las viejas redes de chat.
              </div>
            </article>

            <article class="buzz-box">
              <div class="buzz-box-header">C√≥mo empezar</div>
              <div class="buzz-box-body">
                1) Reg√≠strate o inicia sesi√≥n.<br>
                2) Haz clic en ‚ÄúExplorar salas‚Äù.<br>
                3) Entra a una sala o crea la tuya.<br>
                4) Comparte el link con tus amigos.
              </div>
            </article>
          </div>

          <!-- Parte inferior: √∫ltimos miembros / activos / salas populares -->
          <div class="home-bottom-grid">
            <section class="home-column">
              <h3 class="column-title">√öltimos miembros registrados</h3>
              <ul class="column-list">
                <li>daniel</li>
                <li>retro_girl</li>
                <li>mx_chat</li>
                <li>anon_2025</li>
                <li>guest_01</li>
              </ul>
            </section>

            <section class="home-column">
              <h3 class="column-title">Miembros activos</h3>
              <div class="active-avatars" id="homeActiveAvatars">
                <!-- Se rellenar√° desde JS -->
              </div>
              <p class="column-note">Datos de ejemplo. Luego se podr√°n leer de la base de datos.</p>
            </section>

            <section class="home-column">
              <h3 class="column-title">Salas de chat populares</h3>
              <ul class="column-list">
                <li>#General</li>
                <li>#Amistad</li>
                <li>#M√©xico</li>
                <li>#Ligue</li>
                <li>#Trivia y juegos</li>
              </ul>
            </section>
          </div>
        </section>
      </div>
    </section>

    <!-- P√ÅGINA INICIO DE SESI√ìN -->
    <section id="loginView" class="view auth-view">
      <div class="auth-page">
        <div class="auth-form-box">
          <h1>Iniciar sesi√≥n</h1>
          <p class="auth-subtitle">Usa tu nombre de usuario y contrase√±a para entrar a Shateros 2.0.</p>

          <form id="loginForm">
            <label>Usuario</label>
            <input type="text" id="loginUsername" />

            <label>Contrase√±a</label>
            <input type="password" id="loginPassword" />

            <div class="auth-remember-row">
              <input type="checkbox" id="loginRemember">
              <label for="loginRemember">Recu√©rdame en este equipo</label>
            </div>

            <button type="submit" class="btn-auth-green">Inicia sesi√≥n</button>

            <p class="auth-link-row">
              ¬øNo tienes cuenta? <a href="#" id="linkGoRegister">√önete</a>
            </p>
          </form>

          <p id="authStatusLogin" class="login-status"></p>
        </div>

        <div class="auth-side-graphic">
          <div class="auth-bubbles"></div>
        </div>
      </div>
    </section>

    <!-- P√ÅGINA REGISTRO -->
    <section id="registerView" class="view auth-view">
      <div class="auth-page">
        <div class="auth-form-box">
          <h1>Registro</h1>
          <p class="auth-subtitle">
            Crea tu cuenta de Shateros 2.0. Solo necesitas un usuario y una contrase√±a.
          </p>

          <form id="registerForm">
            <label>Usuario</label>
            <input type="text" id="registerUsername" />

            <label>Contrase√±a</label>
            <input type="password" id="registerPassword" />

            <label>Repetir contrase√±a</label>
            <input type="password" id="registerPasswordConfirm" />

            <div class="auth-remember-row">
              <input type="checkbox" id="termsCheck">
              <label for="termsCheck">Acepto las reglas de la comunidad</label>
            </div>

            <button type="submit" class="btn-auth-green">Registro</button>

            <p class="auth-link-row">
              ¬øYa tienes cuenta? <a href="#" id="linkGoLogin">Inicia sesi√≥n</a>
            </p>
          </form>

          <p class="login-status" id="authStatusRegister"></p>
        </div>

        <div class="auth-side-graphic">
          <div class="auth-bubbles"></div>
        </div>
      </div>
    </section>

    <!-- PERFIL -->
    <section id="profileView" class="view">
      <div class="profile-card">
        <div class="profile-header">
          <img id="profileAvatar" src="https://ui-avatars.com/api/?name=User" alt="Avatar perfil">
          <div>
            <h1 id="profileName">Usuario</h1>
            <p id="profileLevel">Nivel: Miembro</p>
          </div>
        </div>
        <div class="profile-body">
          <p><strong>Nombre de usuario:</strong> <span id="profileUsername">-</span></p>
          <p><strong>Rol global:</strong> <span id="profileRole">Usuario</span></p>
          <p><strong>Estado:</strong> Conectado</p>
        </div>
      </div>
    </section>

    <!-- LISTA DE SALAS -->
    <section id="roomsView" class="view">
      <div class="layout-two-cols">
        <aside class="sidebar">
          <h3>Men√∫</h3>
          <ul>
            <li><a href="#" id="roomsBackHome">Volver al inicio</a></li>
          </ul>

          <h3>Categor√≠as</h3>
          <div class="rooms-categories">
            <button class="cat-pill">Charlas generales</button>
            <button class="cat-pill">Amistad</button>
            <button class="cat-pill">M√©xico</button>
            <button class="cat-pill">Ligue</button>
            <button class="cat-pill">Trivia y juegos</button>
            <button class="cat-pill">Soporte / ayuda</button>
          </div>
        </aside>

        <section class="rooms-content">
          <h1>Lista de salas</h1>
          <p class="rooms-description">
            Elige una sala para entrar. Si quieres crear una nueva, usa el men√∫ ‚ÄúCrear sala‚Äù.
          </p>

          <!-- CREAR SALA: se muestra solo cuando se elige "Crear sala" -->
          <div class="create-room-box" id="createRoomBox" style="display:none;">
            <h2>Crear una nueva sala</h2>

            <div class="create-room-row">
              <label for="newRoomName">Nombre</label>
              <input type="text" id="newRoomName" placeholder="Ej. Charla Retro">
            </div>

            <div class="create-room-row">
              <label for="newRoomDescription">Descripci√≥n</label>
              <input type="text" id="newRoomDescription" placeholder="Tema de la sala">
            </div>

            <div class="create-room-row">
              <label for="newRoomLanguage">Idioma</label>
              <input type="text" id="newRoomLanguage" value="Espa√±ol">
            </div>

            <div class="create-room-row">
              <label for="newRoomNick">Tu nick</label>
              <input type="text" id="newRoomNick" placeholder="Nick con el que entrar√°s a la sala">
            </div>

            <div class="create-room-row">
              <label for="newRoomAdminPass">Contrase√±a admin</label>
              <input type="text" id="newRoomAdminPass" placeholder="Opcional: dejar vac√≠o para generar una aleatoria">
            </div>

            <button id="createRoomBtn" class="btn-small">Crear sala y entrar</button>
            <p id="createRoomStatus" class="login-status"></p>
          </div>

          <!-- LISTA DE SALAS: se oculta cuando est√°s creando -->
          <table class="rooms-table" id="roomsTable">
            <thead>
              <tr>
                <th>Sala</th>
                <th>Descripci√≥n</th>
                <th>Usuarios</th>
                <th>Idioma</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="roomsTableBody"></tbody>
          </table>
        </section>
      </div>
    </section>

    <!-- SALA DE CHAT -->
    <section id="chatView" class="view">

      <div class="chat-top-tabs">
        <button class="chat-tab active">Sala de chat</button>
      </div>

      <div class="chat-date-bar">
        <span id="chatDateLabel">Sala abierta</span>
      </div>

      <div id="loginPanel" class="chat-login">
        <h2>Entrar a la sala</h2>
        <div class="login-row">
          <label for="usernameInput">Nick</label>
          <input type="text" id="usernameInput" placeholder="Tu nick">
        </div>
        <div class="login-row">
          <label for="roomInput">Sala</label>
          <select id="roomInput">
            <option value="general">General</option>
            <option value="amistad">Amistad</option>
            <option value="mexico">M√©xico</option>
            <option value="ligue">Ligue</option>
            <option value="trivia">Trivia</option>
          </select>
        </div>
        <button id="joinBtn" class="btn-primary">Entrar al chat</button>
        <p id="loginStatus" class="login-status"></p>
      </div>

      <div id="chatPanel" class="chat-main-layout" style="display:none;">
        <section class="chat-messages-area">
          <div id="messages" class="chat-messages"></div>

          <div class="chat-input-bar">
            <input type="text" id="messageInput" placeholder="Escribe tu mensaje aqu√≠‚Ä¶">
            <div class="chat-input-buttons">
              <button class="btn-small">Bloq despl</button>
              <button id="sendBtn" class="btn-primary">Enviar</button>
              <button class="btn-small">GIF</button>
              <button class="btn-small">üôÇ</button>
            </div>
          </div>
        </section>

        <aside class="chat-users-panel">
          <div class="chat-users-header">
            <span id="roomTitle">Sala: general</span>
            <span id="userCountLabel">0 usuarios conversando</span>
          </div>
          <ul id="userList" class="chat-users-list"></ul>
          <div class="chat-users-footer">
            <span title="Chat limpio">üßπ</span>
            <span title="Silenciar sonidos">üîï</span>
            <span title="Opciones">‚öôÔ∏è</span>
            <span id="toggleSizeBtn" title="Cambiar tama√±o de la sala">‚§¢</span>
          </div>
        </aside>
      </div>

      <!-- MEN√ö CONTEXTUAL PARA USUARIOS -->
      <div id="userContextMenu" class="user-context-menu">
        <button data-action="pv-chat">Mensaje privado (nueva ventana)</button>
        <hr>
        <button data-action="make-moderator">Hacer moderador</button>
        <button data-action="make-spectator">Hacer espectador</button>
        <button data-action="make-user">Quitar roles</button>
        <hr>
        <button data-action="kick-10">Expulsar 10 min</button>
        <button data-action="kick-60">Expulsar 1 hora</button>
        <button data-action="kick-1440">Expulsar 24 horas</button>
      </div>

    </section>

    <!-- PANEL DE ADMINISTRADOR -->
    <section id="adminView" class="view">
      <h1>Panel de administrador</h1>

      <h2>Salas</h2>
      <table class="rooms-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Tipo</th>
            <th>Usuarios</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="adminRoomsTableBody"></tbody>
      </table>

      <h2>Usuarios registrados</h2>
      <table class="rooms-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Usuario</th>
            <th>Admin</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="adminUsersTableBody"></tbody>
      </table>
    </section>

  </main>

  <script src="/socket.io/socket.io.js"></script>
  <script src="chat.js"></script>
</body>
</html>
